# Семантика языка Init

## Области видимости

- Язык использует **лексическую (статическую) область видимости**.
- Область видимости определяется **блоками `{ }`**:
  - переменные, объявленные в блоке, видны **только внутри этого блока и вложенных блоков**;
  - глобальные переменные и функции объявляются на верхнем уровне и видны везде.
- Функции **не захватывают** переменные внешней области видимости (нет замыканий).
- Переменная **недоступна вне своей области видимости**, включая доступ после завершения функции.

## Уникальность имён

- Имя символа должно быть **уникальным в пределах одной области видимости**.
- Переменные и функции используют **общее пространство имён**.
- Разрешено сокрытие: локальная переменная может скрывать переменную внешней области с тем же именем.
- **Нельзя скрыть встроенную функцию** (`length`, `charAt`, `toLowerCase`) или **ключевое слово**, так как это приведёт к ошибке: встроенные функции и ключевые слова **зарезервированы**.
- Имена типов (`float`, `bool`, `string`, `void`) — **ключевые слова**, их нельзя использовать как идентификаторы.

## Параметры функций

- Параметры передаются **по значению**.
- Параметры ведут себя как **локальные переменные** внутри функции:
  - их можно **переприсваивать**;
  - их **можно скрывать** локальной переменной.
- Число фактических и формальных параметров должно совпадать.
- Аргументы вычисляются слева направо перед вызовом функции.
- Функция с типом возврата void:
  Не может содержать return с выражением.
  Может завершаться без return (неявный возврат в конце).
- Функция с типом возврата float, bool или string:
  Должна содержать хотя бы один оператор return с выражением.
  Тип выражения в return должен совпадать с типом возврата функции.

## Рекурсия

- **Рекурсия поддерживается**: функция может вызывать саму себя.
- **Взаимная рекурсия поддерживается**: функции могут вызывать друг друга, если объявлены в правильном порядке.
- Глубина рекурсии ограничена стеком выполнения.

## Ветвления

- Выражение в условии (`if`, `while`, `repeat until`, `switch`) должно иметь тип `bool`.
- Значения других типов **нельзя использовать напрямую как условие** (нет неявного преобразования в `bool`).
- Конструкция `switch` поддерживается:
  - выражение и метки `case` должны быть одного типа (`float` или `string`);
  - `switch` использует **сравнение на точное равенство** (`==`);
  - **Нет автоматического `break`**: возможен **fall-through**, как в C/C++.

## Циклы

- Цикл `while (expr) stmt` выполняется, пока `expr` — `true`.
- Цикл `repeat { stmt } until (expr)` выполняется **минимум один раз**, пока `expr` — **`false`** (завершается, когда `expr` становится `true`).
- Инструкция `break` допустима **только внутри тела цикла (`while`, `repeat`) или `switch`**.

## Встроенные функции

Язык предоставляет следующие предопределённые функции:

### Работа со строками
- `length(s: string): float` — возвращает длину строки (в байтах).
- `charAt(s: string, i: float): string` — возвращает i-й символ (0-индексация).
- `toLowerCase(s: string): string` — преобразует строку в нижний регистр.

### Преобразование типов
- `parseFloat(s: string): float` — парсит строку как число; ошибка, если строка некорректна.
- `stringify(x: float): string` — преобразует число в строку.

### Ввод-вывод
- `print(...)` — выводит аргументы через пробел.
- `input(var)` — читает значение в переменную.

## Прочие правила

- **Левая часть присваивания** должна быть **именем переменной** (идентификатором).  
  Конструкции вроде `f() = x` или `2 = x` — недопустимы.
- **Обращение к неинициализированной переменной** — ошибка.  
  Переменная **должна быть инициализирована** до использования (на этапе семантического анализа или выполнения).
- **Неизменяемых переменных (const, let) нет** — все переменные **изменяемы**.
- **Все функции должны быть объявлены до вызова** .
- **Оператор `return` без выражения** разрешён **только в функциях типа `void`**.

